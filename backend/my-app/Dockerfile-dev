FROM node:18-alpine3.16

WORKDIR /usr/src/app

COPY *.json ./

RUN npm install && npm cache clean --force

#COPY --chown=node:node . . #this is good for production when we wont have a bind mount for the src files

ENV NPM_CONFIG_PREFIX=/home/node/.npm-global

ENV PATH=$PATH:/home/node/.npm-global/bin

ENV PATH /app/node_modules/.bin:$PATH

ENV NODE_ENV=development

USER node

CMD ["npm", "run", "start:dev"]
